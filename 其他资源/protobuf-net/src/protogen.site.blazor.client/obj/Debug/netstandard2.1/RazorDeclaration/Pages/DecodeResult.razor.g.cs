// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace ProtoBuf.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using ProtoBuf;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using ProtoBuf.Pages;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using ProtoBuf.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
using ProtoBuf.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
using System.Text;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
using System.IO;

#line default
#line hidden
#nullable disable
    public partial class DecodeResult : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 6 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
       

    [Parameter]
    public DecodeModel DecodeModel { get; set; }

    private RenderFragment<(ProtoReader Reader, bool ShowFullStrings)> WriteTier;

    protected override void OnInitialized()
    {
        WriteTier = pair =>

#line default
#line hidden
#nullable disable
        (__builder2) => {
            __builder2.OpenElement(0, "div");
            __builder2.AddAttribute(1, "class", "ml-5 border-left  border-secondary pl-1");
            __builder2.AddMarkupContent(2, "\r\n");
#nullable restore
#line 16 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
          
            var reader = pair.Reader;
            var showFullStrings = pair.ShowFullStrings;
            long start = reader.Position;
            int field;
            while ((field = reader.ReadFieldHeader()) > 0)
            {
                long payloadStart = reader.Position;


#line default
#line hidden
#nullable disable
            __builder2.AddContent(3, "                ");
            __builder2.OpenElement(4, "div");
            __builder2.AddMarkupContent(5, "\r\n                    Field #");
            __builder2.AddContent(6, 
#nullable restore
#line 26 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                            reader.FieldNumber

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(7, ": ");
            __builder2.AddContent(8, 
#nullable restore
#line 26 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                 AsHex(start, payloadStart - start)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddMarkupContent(9, "\r\n                    ");
            __builder2.OpenElement(10, "span");
            __builder2.AddAttribute(11, "class", "badge badge-secondary");
            __builder2.AddContent(12, 
#nullable restore
#line 27 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                         reader.WireType

#line default
#line hidden
#nullable disable
            );
            __builder2.CloseElement();
            __builder2.AddMarkupContent(13, "\r\n");
#nullable restore
#line 28 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                     switch (reader.WireType)
                    {
                        case WireType.Varint:
                        case WireType.Fixed32:
                        case WireType.Fixed64:
                            // just pretending everything is integers for now, for simplicity
                            var val = reader.ReadInt64();

#line default
#line hidden
#nullable disable
            __builder2.AddContent(14, "                            ");
            __builder2.OpenElement(15, "span");
            __builder2.AddMarkupContent(16, "\r\n                                Value = ");
            __builder2.AddContent(17, 
#nullable restore
#line 36 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                         val

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(18, ", Hex = ");
            __builder2.AddContent(19, 
#nullable restore
#line 36 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                     AsHex(payloadStart, reader.Position - payloadStart)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddMarkupContent(20, "\r\n                            ");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(21, "\r\n");
#nullable restore
#line 38 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                            break;
                        case WireType.String:
                            // now, this could be a sub-message, or it could be a UTF8 string
                            // this isn't efficient, but it works
                            var payloadBytes = ProtoReader.AppendBytes(null, reader);

#line default
#line hidden
#nullable disable
            __builder2.AddContent(22, "                            ");
            __builder2.OpenElement(23, "span");
            __builder2.AddMarkupContent(24, "\r\n                                Length = ");
            __builder2.AddContent(25, 
#nullable restore
#line 44 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                          payloadBytes.Length

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(26, ", Hex = ");
            __builder2.AddContent(27, 
#nullable restore
#line 44 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                      AsHex(payloadStart, reader.Position - payloadStart - payloadBytes.Length)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddMarkupContent(28, ",\r\n\r\n");
#nullable restore
#line 46 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                 try
                                {
                                    var utf8 = Encoding.UTF8.GetString(payloadBytes);

                                    if (IsUri(utf8))
                                    {
                                        if (utf8.Length > 16 && !showFullStrings)
                                        {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(29, "                                            ");
            __builder2.OpenElement(30, "span");
            __builder2.AddAttribute(31, "title", 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                          utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(32, "UTF8 = \"");
            __builder2.OpenElement(33, "a");
            __builder2.AddAttribute(34, "rel", "noopener noreferrer nofollow");
            __builder2.AddAttribute(35, "href", 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                                     utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(36, 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                                            utf8.Substring(0, 16)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(37, " ...");
            __builder2.CloseElement();
            __builder2.AddContent(38, "\" (total ");
            __builder2.AddContent(39, 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                                                                                   utf8.Length

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(40, " chars)");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(41, "\r\n");
#nullable restore
#line 55 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                        }
                                        else
                                        {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(42, "                                            ");
            __builder2.OpenElement(43, "span");
            __builder2.AddContent(44, "UTF8 = \"");
            __builder2.OpenElement(45, "a");
            __builder2.AddAttribute(46, "rel", "noopener noreferrer nofollow");
            __builder2.AddAttribute(47, "href", 
#nullable restore
#line 58 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                       utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(48, 
#nullable restore
#line 58 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                              utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.CloseElement();
            __builder2.AddContent(49, "\"");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(50, "\r\n");
#nullable restore
#line 59 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                        }
                                    }
                                    else if (utf8.Length > 16 && !showFullStrings)
                                    {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(51, "                                        ");
            __builder2.OpenElement(52, "span");
            __builder2.AddAttribute(53, "title", 
#nullable restore
#line 63 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                      utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(54, "UTF8 = \"");
            __builder2.AddContent(55, 
#nullable restore
#line 63 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                     utf8.Substring(0, 16)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(56, " ...\" (total ");
            __builder2.AddContent(57, 
#nullable restore
#line 63 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                        utf8.Length

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(58, " chars)");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(59, "\r\n");
#nullable restore
#line 64 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(60, "                                        ");
            __builder2.OpenElement(61, "span");
            __builder2.AddContent(62, "UTF8 = \"");
            __builder2.AddContent(63, 
#nullable restore
#line 67 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                       utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(64, "\"");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(65, "\r\n");
#nullable restore
#line 68 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                    }
                                }
                                catch
                                {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(66, "                                    ");
            __builder2.AddMarkupContent(67, "<span class=\"badge badge-warning\">Non UTF8 string</span>\r\n");
#nullable restore
#line 73 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder2.AddContent(68, "                            ");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(69, "\r\n");
#nullable restore
#line 76 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                             using (var subReader = TestCouldBeProto(payloadBytes))
                            {
                                if (subReader != null)
                                {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(70, "                                    ");
            __builder2.AddMarkupContent(71, "<div class=\"ml-5\">As sub-object : </div>\r\n");
            __builder2.AddContent(72, 
#nullable restore
#line 81 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                     WriteTier((subReader, showFullStrings))

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 81 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                            
                                }
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 83 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                             
                            break;
                        case WireType.StartGroup:
                            // explicit group
                            var tok = ProtoReader.StartSubItem(reader);
                            

#line default
#line hidden
#nullable disable
            __builder2.AddContent(73, 
#nullable restore
#line 94 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                             WriteTier((reader, showFullStrings))

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 94 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                 
                            ProtoReader.EndSubItem(tok, reader);
                            break;
                        default:
                            throw new InvalidOperationException("oops we missed this!");
                    }

#line default
#line hidden
#nullable disable
            __builder2.AddContent(74, "                ");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(75, "\r\n");
#nullable restore
#line 101 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                start = reader.Position;
            }
        

#line default
#line hidden
#nullable disable
            __builder2.AddContent(76, "    ");
            __builder2.CloseElement();
        }
#nullable restore
#line 104 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
          ;
}
string AsHex(long start, long count) => BitConverter.ToString(DecodeModel.Data, checked((int)start), checked((int)count));

bool IsUri(string input)
{
    return false; // this breaks... something (browser just hangs)
    /* try
    {
        if (string.IsNullOrWhiteSpace(input)) return false;
        return Uri.TryCreate(input, UriKind.Absolute, out _);
    }
    catch{ return false;} */
}

static ProtoReader TestCouldBeProto(byte[] payload)
{
  if (payload == null || payload.Length == 0)
      return null; // not worth bothering with
  try
  {
      var ms = new MemoryStream(payload);
#pragma warning disable CS0618
      using (var test = ProtoReader.Create(ms, null, null))
#pragma warning restore CS0618
      {   // can we make it to the end without failing?
          int field;
          while ((field = test.ReadFieldHeader()) > 0)
              test.SkipField();
      }
      // if we got this far... it has potential!

      ms.Position = 0; //rewind and do it all again!
#pragma warning disable CS0618
      return ProtoReader.Create(ms, null, null);
#pragma warning restore CS0618
  }
  catch
  {
      // nope, then
      return null;
  }
}

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
