#pragma checksum "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "2f44caaa1fed1c7654a8f0ab6a3a0fae8f1da599"
// <auto-generated/>
#pragma warning disable 1591
namespace ProtoBuf.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using ProtoBuf;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using ProtoBuf.Pages;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\_Imports.razor"
using ProtoBuf.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
using ProtoBuf.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
using System.Text;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
using System.IO;

#line default
#line hidden
#nullable disable
    public partial class DecodeResult : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddContent(0, 
#nullable restore
#line 4 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
 WriteTier((DecodeModel.GetReader(), DecodeModel.ShowFullStrings))

#line default
#line hidden
#nullable disable
            );
        }
        #pragma warning restore 1998
#nullable restore
#line 6 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
       

    [Parameter]
    public DecodeModel DecodeModel { get; set; }

    private RenderFragment<(ProtoReader Reader, bool ShowFullStrings)> WriteTier;

    protected override void OnInitialized()
    {
        WriteTier = pair =>

#line default
#line hidden
#nullable disable
        (__builder2) => {
            __builder2.OpenElement(1, "div");
            __builder2.AddAttribute(2, "class", "ml-5 border-left  border-secondary pl-1");
            __builder2.AddMarkupContent(3, "\r\n");
#nullable restore
#line 16 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
          
            var reader = pair.Reader;
            var showFullStrings = pair.ShowFullStrings;
            long start = reader.Position;
            int field;
            while ((field = reader.ReadFieldHeader()) > 0)
            {
                long payloadStart = reader.Position;


#line default
#line hidden
#nullable disable
            __builder2.AddContent(4, "                ");
            __builder2.OpenElement(5, "div");
            __builder2.AddMarkupContent(6, "\r\n                    Field #");
            __builder2.AddContent(7, 
#nullable restore
#line 26 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                            reader.FieldNumber

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(8, ": ");
            __builder2.AddContent(9, 
#nullable restore
#line 26 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                 AsHex(start, payloadStart - start)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddMarkupContent(10, "\r\n                    ");
            __builder2.OpenElement(11, "span");
            __builder2.AddAttribute(12, "class", "badge badge-secondary");
            __builder2.AddContent(13, 
#nullable restore
#line 27 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                         reader.WireType

#line default
#line hidden
#nullable disable
            );
            __builder2.CloseElement();
            __builder2.AddMarkupContent(14, "\r\n");
#nullable restore
#line 28 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                     switch (reader.WireType)
                    {
                        case WireType.Varint:
                        case WireType.Fixed32:
                        case WireType.Fixed64:
                            // just pretending everything is integers for now, for simplicity
                            var val = reader.ReadInt64();

#line default
#line hidden
#nullable disable
            __builder2.AddContent(15, "                            ");
            __builder2.OpenElement(16, "span");
            __builder2.AddMarkupContent(17, "\r\n                                Value = ");
            __builder2.AddContent(18, 
#nullable restore
#line 36 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                         val

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(19, ", Hex = ");
            __builder2.AddContent(20, 
#nullable restore
#line 36 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                     AsHex(payloadStart, reader.Position - payloadStart)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddMarkupContent(21, "\r\n                            ");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(22, "\r\n");
#nullable restore
#line 38 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                            break;
                        case WireType.String:
                            // now, this could be a sub-message, or it could be a UTF8 string
                            // this isn't efficient, but it works
                            var payloadBytes = ProtoReader.AppendBytes(null, reader);

#line default
#line hidden
#nullable disable
            __builder2.AddContent(23, "                            ");
            __builder2.OpenElement(24, "span");
            __builder2.AddMarkupContent(25, "\r\n                                Length = ");
            __builder2.AddContent(26, 
#nullable restore
#line 44 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                          payloadBytes.Length

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(27, ", Hex = ");
            __builder2.AddContent(28, 
#nullable restore
#line 44 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                      AsHex(payloadStart, reader.Position - payloadStart - payloadBytes.Length)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddMarkupContent(29, ",\r\n\r\n");
#nullable restore
#line 46 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                 try
                                {
                                    var utf8 = Encoding.UTF8.GetString(payloadBytes);

                                    if (IsUri(utf8))
                                    {
                                        if (utf8.Length > 16 && !showFullStrings)
                                        {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(30, "                                            ");
            __builder2.OpenElement(31, "span");
            __builder2.AddAttribute(32, "title", 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                          utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(33, "UTF8 = \"");
            __builder2.OpenElement(34, "a");
            __builder2.AddAttribute(35, "rel", "noopener noreferrer nofollow");
            __builder2.AddAttribute(36, "href", 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                                     utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(37, 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                                            utf8.Substring(0, 16)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(38, " ...");
            __builder2.CloseElement();
            __builder2.AddContent(39, "\" (total ");
            __builder2.AddContent(40, 
#nullable restore
#line 54 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                                                                                   utf8.Length

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(41, " chars)");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(42, "\r\n");
#nullable restore
#line 55 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                        }
                                        else
                                        {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(43, "                                            ");
            __builder2.OpenElement(44, "span");
            __builder2.AddContent(45, "UTF8 = \"");
            __builder2.OpenElement(46, "a");
            __builder2.AddAttribute(47, "rel", "noopener noreferrer nofollow");
            __builder2.AddAttribute(48, "href", 
#nullable restore
#line 58 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                       utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(49, 
#nullable restore
#line 58 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                              utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.CloseElement();
            __builder2.AddContent(50, "\"");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(51, "\r\n");
#nullable restore
#line 59 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                        }
                                    }
                                    else if (utf8.Length > 16 && !showFullStrings)
                                    {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(52, "                                        ");
            __builder2.OpenElement(53, "span");
            __builder2.AddAttribute(54, "title", 
#nullable restore
#line 63 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                      utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(55, "UTF8 = \"");
            __builder2.AddContent(56, 
#nullable restore
#line 63 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                     utf8.Substring(0, 16)

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(57, " ...\" (total ");
            __builder2.AddContent(58, 
#nullable restore
#line 63 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                                                        utf8.Length

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(59, " chars)");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(60, "\r\n");
#nullable restore
#line 64 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(61, "                                        ");
            __builder2.OpenElement(62, "span");
            __builder2.AddContent(63, "UTF8 = \"");
            __builder2.AddContent(64, 
#nullable restore
#line 67 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                       utf8

#line default
#line hidden
#nullable disable
            );
            __builder2.AddContent(65, "\"");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(66, "\r\n");
#nullable restore
#line 68 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                    }
                                }
                                catch
                                {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(67, "                                    ");
            __builder2.AddMarkupContent(68, "<span class=\"badge badge-warning\">Non UTF8 string</span>\r\n");
#nullable restore
#line 73 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder2.AddContent(69, "                            ");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(70, "\r\n");
#nullable restore
#line 76 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                             using (var subReader = TestCouldBeProto(payloadBytes))
                            {
                                if (subReader != null)
                                {

#line default
#line hidden
#nullable disable
            __builder2.AddContent(71, "                                    ");
            __builder2.AddMarkupContent(72, "<div class=\"ml-5\">As sub-object : </div>\r\n");
            __builder2.AddContent(73, 
#nullable restore
#line 81 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                     WriteTier((subReader, showFullStrings))

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 81 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                            
                                }
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 83 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                             
                            break;
                        case WireType.StartGroup:
                            // explicit group
                            var tok = ProtoReader.StartSubItem(reader);
                            

#line default
#line hidden
#nullable disable
            __builder2.AddContent(74, 
#nullable restore
#line 94 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                             WriteTier((reader, showFullStrings))

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 94 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                                                                 
                            ProtoReader.EndSubItem(tok, reader);
                            break;
                        default:
                            throw new InvalidOperationException("oops we missed this!");
                    }

#line default
#line hidden
#nullable disable
            __builder2.AddContent(75, "                ");
            __builder2.CloseElement();
            __builder2.AddMarkupContent(76, "\r\n");
#nullable restore
#line 101 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
                start = reader.Position;
            }
        

#line default
#line hidden
#nullable disable
            __builder2.AddContent(77, "    ");
            __builder2.CloseElement();
        }
#nullable restore
#line 104 "C:\Users\baoruichang\Desktop\protobuf-net\src\protogen.site.blazor.client\Pages\DecodeResult.razor"
          ;
}
string AsHex(long start, long count) => BitConverter.ToString(DecodeModel.Data, checked((int)start), checked((int)count));

bool IsUri(string input)
{
    return false; // this breaks... something (browser just hangs)
    /* try
    {
        if (string.IsNullOrWhiteSpace(input)) return false;
        return Uri.TryCreate(input, UriKind.Absolute, out _);
    }
    catch{ return false;} */
}

static ProtoReader TestCouldBeProto(byte[] payload)
{
  if (payload == null || payload.Length == 0)
      return null; // not worth bothering with
  try
  {
      var ms = new MemoryStream(payload);
#pragma warning disable CS0618
      using (var test = ProtoReader.Create(ms, null, null))
#pragma warning restore CS0618
      {   // can we make it to the end without failing?
          int field;
          while ((field = test.ReadFieldHeader()) > 0)
              test.SkipField();
      }
      // if we got this far... it has potential!

      ms.Position = 0; //rewind and do it all again!
#pragma warning disable CS0618
      return ProtoReader.Create(ms, null, null);
#pragma warning restore CS0618
  }
  catch
  {
      // nope, then
      return null;
  }
}

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
